{"version":3,"file":"ng-captcha.js.map","sources":["ng://ng-captcha/lib/captcha.component.ts","ng://ng-captcha/lib/captcha.module.ts"],"sourcesContent":["import { Component, OnInit, ViewChild, Output, EventEmitter, Input } from '@angular/core';\n\n@Component({\n  selector: 'captcha',\n  templateUrl: './captcha.component.html',\n  styleUrls: ['./captcha.component.css']\n})\nexport class CaptchaComponent implements OnInit {\n\n  @Input() width\n  @Input() height\n  @Output() generateCode = new EventEmitter()\n  @ViewChild('captchaContainer') container\n  canvas = document.createElement('canvas')\n  letters = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\"]\n  code = ''\n\n  constructor() { }\n\n  ngOnInit() {\n    this.init()\n    this.refresh()\n  }\n\n  onClick() {\n    this.refresh()\n  }\n\n  private init() {\n    this.canvas.width = this.width || 100\n    this.canvas.height = this.height || 50\n    this.canvas.style.cursor = 'pointer'\n    this.canvas.innerHTML = 'æ¨çæµè§å¨çæ¬ä¸æ¯æcanvas'\n    this.container.nativeElement.appendChild(this.canvas)\n  }\n\n  // generate code\n  private refresh() {\n    this.code = ''\n    const ctx = this.canvas.getContext('2d')\n    ctx.textBaseline = 'middle'\n    ctx.fillStyle = this.randomColor(180, 240)\n    ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\n\n    for (let i = 0; i < 4; i++) {\n      const letter = this.letters[this.randomNum(0, this.letters.length)]\n      this.code += letter\n      ctx.font = this.randomNum(this.canvas.height / 2, this.canvas.height) + 'px SimHei'\n      ctx.fillStyle = this.randomColor(50, 160)\n      ctx.shadowOffsetX = this.randomNum(-3, 3)\n      ctx.shadowOffsetY = this.randomNum(-3, 3)\n      ctx.shadowBlur = this.randomNum(-3, 3)\n      ctx.shadowColor = 'rgb(0, 0, 0, 0.3)'\n      const x = this.canvas.width / 5 * i\n      const y = this.canvas.height / 2\n      const deg = this.randomNum(-30, 30)\n      // setting rotate and origin point\n      ctx.translate(x, y)\n      ctx.rotate(deg * Math.PI / 180)\n      ctx.fillText(letter, 0, 0)\n      // reset rotate and origin point\n      ctx.rotate(-deg * Math.PI / 180)\n      ctx.translate(-x, -y)\n    }\n\n    // draw interfering line\n    for (let i = 0; i < 4; i++) {\n      ctx.strokeStyle = this.randomColor(40, 180)\n      ctx.beginPath()\n      ctx.moveTo(this.randomNum(0, this.canvas.width), this.randomNum(0, this.canvas.height))\n      ctx.lineTo(this.randomNum(0, this.canvas.width), this.randomNum(0, this.canvas.height))\n      ctx.stroke()\n    }\n\n    // draw interfering point\n    for (let i = 0; i < this.canvas.width / 4; i++) {\n      ctx.fillStyle = this.randomColor()\n      ctx.beginPath()\n      ctx.arc(this.randomNum(0, this.canvas.width), this.randomNum(0, this.canvas.height), 1, 0, 2 * Math.PI)\n      ctx.fill()\n    }\n\n    this.generateCode.emit(this.code.toLowerCase())\n  }\n\n  /**\n   * return a random integer\n   * @param min æå°å¼\n   * @param max æå¤§å¼\n   */\n  private randomNum(min, max) {\n    return Math.floor(Math.random() * (max - min) + min)\n  }\n\n  /**\n   * return a random color\n   */\n  private randomColor(min = 0, max = 255) {\n    const r = this.randomNum(min, max)\n    const g = this.randomNum(min, max)\n    const b = this.randomNum(min, max)\n    return `rgb(${r}, ${g}, ${b})`\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CaptchaComponent } from './captcha.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [CaptchaComponent],\n  exports: [CaptchaComponent]\n})\nexport class CaptchaModule { }\n"],"names":[],"mappings":";;;;;;;AAAA,MAOa,gBAAgB;IAU3B;QANU,iBAAY,GAAG,IAAI,YAAY,EAAE,CAAA;QAE3C,WAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAA;QACzC,YAAO,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAA;QAChU,SAAI,GAAG,EAAE,CAAA;KAEQ;;;;IAEjB,QAAQ;QACN,IAAI,CAAC,IAAI,EAAE,CAAA;QACX,IAAI,CAAC,OAAO,EAAE,CAAA;KACf;;;;IAED,OAAO;QACL,IAAI,CAAC,OAAO,EAAE,CAAA;KACf;;;;IAEO,IAAI;QACV,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,GAAG,CAAA;QACrC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,IAAI,EAAE,CAAA;QACtC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAA;QACpC,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,kBAAkB,CAAA;QAC1C,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;KACtD;;;;;IAGO,OAAO;QACb,IAAI,CAAC,IAAI,GAAG,EAAE,CAAA;;cACR,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC;QACxC,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAA;QAC3B,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;QAC1C,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;QAEzD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;;kBACpB,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACnE,IAAI,CAAC,IAAI,IAAI,MAAM,CAAA;YACnB,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,WAAW,CAAA;YACnF,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,GAAG,CAAC,CAAA;YACzC,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;YACzC,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;YACzC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;YACtC,GAAG,CAAC,WAAW,GAAG,mBAAmB,CAAA;;kBAC/B,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC;;kBAC7B,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC;;kBAC1B,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC;;;;YAEnC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;YACnB,GAAG,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,CAAA;YAC/B,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;;YAE1B,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,CAAA;YAChC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;SACtB;;QAGD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YAC1B,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,GAAG,CAAC,CAAA;YAC3C,GAAG,CAAC,SAAS,EAAE,CAAA;YACf,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAA;YACvF,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAA;YACvF,GAAG,CAAC,MAAM,EAAE,CAAA;SACb;;QAGD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YAC9C,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,EAAE,CAAA;YAClC,GAAG,CAAC,SAAS,EAAE,CAAA;YACf,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAA;YACvG,GAAG,CAAC,IAAI,EAAE,CAAA;SACX;QAED,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAA;KAChD;;;;;;;IAOO,SAAS,CAAC,GAAG,EAAE,GAAG;QACxB,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,CAAA;KACrD;;;;;;;IAKO,WAAW,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG;;cAC9B,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC;;cAC5B,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC;;cAC5B,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC;QAClC,OAAO,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAA;KAC/B;;;YApGF,SAAS,SAAC;gBACT,QAAQ,EAAE,SAAS;gBACnB,2FAAuC;;aAExC;;;;;oBAGE,KAAK;qBACL,KAAK;2BACL,MAAM;wBACN,SAAS,SAAC,kBAAkB;;;;;;;ACZ/B,MAWa,aAAa;;;YAPzB,QAAQ,SAAC;gBACR,OAAO,EAAE;oBACP,YAAY;iBACb;gBACD,YAAY,EAAE,CAAC,gBAAgB,CAAC;gBAChC,OAAO,EAAE,CAAC,gBAAgB,CAAC;aAC5B;;;;;;;;;;;;;;;"}
