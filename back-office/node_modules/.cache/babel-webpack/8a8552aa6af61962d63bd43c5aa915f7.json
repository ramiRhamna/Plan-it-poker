{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/mss/Desktop/FinalPFE/Graduartion/back-office/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport Swal from 'sweetalert2';\nlet ProductsComponent = class ProductsComponent {\n  constructor(productService, dialogService, router, _location, notificationService, _Snackbar) {\n    this.productService = productService;\n    this.dialogService = dialogService;\n    this.router = router;\n    this._location = _location;\n    this.notificationService = notificationService;\n    this._Snackbar = _Snackbar;\n    this.listProduct = [];\n    this.isEditeMode = false;\n    this.baseProductPath = \"../../assets/igesa-software/images/Enterprise-\" + localStorage.getItem('idEntreprise') + \"/product/\"; //CKeditor\n\n    this.config = {\n      height: 200,\n      image: {\n        styles: ['alignLeft', 'alignCenter', 'alignRight'],\n        // Configure the available image resize options.\n        resizeOptions: [{\n          name: 'resizeImage:original',\n          label: 'Original',\n          value: null\n        }, {\n          name: 'resizeImage:5',\n          label: '5%',\n          value: '5'\n        }, {\n          name: 'resizeImage:10',\n          label: '10%',\n          value: '10'\n        }, {\n          name: 'resizeImage:25',\n          label: '25%',\n          value: '25'\n        }, {\n          name: 'resizeImage:50',\n          label: '50%',\n          value: '50'\n        }, {\n          name: 'resizeImage:75',\n          label: '75%',\n          value: '75'\n        }],\n        // You need to configure the image toolbar, too, so it shows the new style\n        // buttons as well as the resize buttons.\n        toolbar: ['imageStyle:alignLeft', 'imageStyle:alignCenter', 'imageStyle:alignRight', '|', 'ImageResize', '|', 'imageTextAlternative']\n      },\n      language: 'en'\n    };\n  }\n\n  ngOnInit() {\n    this.getTagsByEntreprise();\n    this.getCategorieByEntreprise();\n    this.getProductsByEntreprise();\n    this.productService.populateForm(this.idProduct);\n  }\n\n  getTagsByEntreprise() {\n    this.productService.getTagsByEntreprise().subscribe(res => {\n      console.log(\"tags===>\", res);\n      this.tagsByEntreprise = res;\n    });\n  }\n\n  getCategorieByEntreprise() {\n    this.productService.getCategorieByEntreprise().subscribe(res => {\n      console.log(\"categorie===>\", res);\n      this.categoryByEntreprise = res;\n    });\n  } //events \n\n\n  onChangeCategorie(event) {\n    this.categorieSelected = event.target.value;\n    console.log('the categorie selected =>', this.categorieSelected);\n  }\n\n  onChangeTag(event) {\n    console.log('the selected tags ====>', event);\n    this.tagSelected = event;\n  }\n\n  onSelectFile(file) {\n    //test=\"../../assets/igesa-software/images/Enterprise-2/product/0.6628314392580117.png\"  \n    //console.log('file =======================>',file.target.files[0]);\n    this.imageFile = file.target.files[0];\n    this.typeImage = file.target.files[0].name.split('.').pop();\n    console.log('file.target.files[0] :', file.target.files[0], \"file.target.files[0].type :\", file.target.files[0].name.split('.').pop());\n  }\n\n  onAddProduct() {\n    this.addProduct();\n  } //fo add an produit resize\n\n\n  addProduct() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let imageName = Math.random().toString(); //+ \".png\";\n\n      let productBody = {\n        image: _this.baseProductPath + imageName + \".\" + _this.typeImage,\n        title: _this.productService.form.value.title,\n        description: _this.productService.form.value.description,\n        caracteristique: _this.productService.form.value.caracteristique,\n        slug: _this.productService.form.value.slug,\n        name: _this.productService.form.value.name,\n        requirements: _this.productService.form.value.requirements,\n        categorieId: _this.categorieSelected,\n        createdDate: new Date(),\n        lastModifiedDate: new Date(),\n        entrepriseId: localStorage.getItem('idEntreprise')\n      };\n      yield _this.productService.uploadProductImage(imageName, _this.imageFile).subscribe(res => {\n        console.log('the result of upload image ', res);\n      });\n      yield _this.productService.addProduct(productBody).subscribe(res => {\n        console.log('the result of add product ===>', res);\n        _this.idProduct = res.id;\n        console.log('idProduct======================>', _this.idProduct);\n\n        for (let i = 0; i < _this.tagSelected.length; i++) {\n          _this.productService.assignTagsToAnProduct(_this.idProduct, _this.tagSelected[i]).subscribe(res => {\n            console.log('the result of assign product ===>', res);\n          }, err => {\n            console.log('assign errr===============>', err);\n          });\n        }\n      });\n    })();\n  }\n\n  getProductsByEntreprise() {\n    this.productService.getAllProductsByEntreprise().subscribe(res => {\n      console.log('result of the product ====================>', res);\n      this.listPrducts = res;\n      /*console.log('==================>res image',this.listPrducts[0].image);*/\n    }, err => {\n      console.log('result of the product ====================>', err);\n    });\n  }\n  /*************************\r\n   * delete product\r\n   */\n\n\n  onDeleteProduct(id) {\n    Swal.fire({\n      title: 'Are you sure to delete this product !?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonText: 'Yes',\n      cancelButtonText: 'No',\n      cancelButtonColor: 'gray'\n    }).then(result => {\n      if (result.value) {\n        this.productService.deleterPoducts(id).subscribe(response => {\n          console.log(response);\n          Swal.fire('Deleted!', 'All Groupe  was Deleted successfully.', 'success');\n\n          if (result.dismiss === Swal.DismissReason.cancel) {}\n\n          this.refresh();\n          this.getProductsByEntreprise();\n          this.listProduct.push();\n        }); // snackBar success \n\n        this._Snackbar.open(\"Groupes Deleted Successfully\", +'' + \"OK\" + '' + '⚡', {\n          duration: 5000,\n          horizontalPosition: \"right\",\n          verticalPosition: \"top\",\n          panelClass: [\"mat-toolbar\", \"mat-success\"]\n        });\n      }\n\n      this.refresh();\n      this.getProductsByEntreprise();\n      this.listProduct.push();\n    });\n  } //refrech \n\n\n  refresh() {\n    this.router.navigateByUrl(\"/refresh\", {\n      skipLocationChange: true\n    }).then(() => {\n      console.log(decodeURI(this._location.path()));\n      this.router.navigate([decodeURI(this._location.path())]);\n    });\n  }\n\n  onEdite(row) {\n    this.isEditeMode = true;\n    this.productService.populateForm(row);\n  }\n\n  onUpdate() {\n    this.isEditeMode != this.isEditeMode;\n    this.productService.update(this.productService.form.value).subscribe(res => {\n      console.log(\"====================> updateeeeee test \", res);\n      this.notificationService.success('  ::  ' + ' ' + ' updated successfully ' + '⚡');\n      this.refresh();\n    });\n  }\n\n};\nProductsComponent = __decorate([Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.css']\n})], ProductsComponent);\nexport { ProductsComponent };","map":{"version":3,"sources":["C:/Users/mss/Desktop/FinalPFE/Graduartion/back-office/src/app/products/products.component.ts"],"names":["__decorate","Component","Swal","ProductsComponent","constructor","productService","dialogService","router","_location","notificationService","_Snackbar","listProduct","isEditeMode","baseProductPath","localStorage","getItem","config","height","image","styles","resizeOptions","name","label","value","toolbar","language","ngOnInit","getTagsByEntreprise","getCategorieByEntreprise","getProductsByEntreprise","populateForm","idProduct","subscribe","res","console","log","tagsByEntreprise","categoryByEntreprise","onChangeCategorie","event","categorieSelected","target","onChangeTag","tagSelected","onSelectFile","file","imageFile","files","typeImage","split","pop","onAddProduct","addProduct","imageName","Math","random","toString","productBody","title","form","description","caracteristique","slug","requirements","categorieId","createdDate","Date","lastModifiedDate","entrepriseId","uploadProductImage","id","i","length","assignTagsToAnProduct","err","getAllProductsByEntreprise","listPrducts","onDeleteProduct","fire","icon","showCancelButton","confirmButtonText","cancelButtonText","cancelButtonColor","then","result","deleterPoducts","response","dismiss","DismissReason","cancel","refresh","push","open","duration","horizontalPosition","verticalPosition","panelClass","navigateByUrl","skipLocationChange","decodeURI","path","navigate","onEdite","row","onUpdate","update","success","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nimport Swal from 'sweetalert2';\r\nlet ProductsComponent = class ProductsComponent {\r\n    constructor(productService, dialogService, router, _location, notificationService, _Snackbar) {\r\n        this.productService = productService;\r\n        this.dialogService = dialogService;\r\n        this.router = router;\r\n        this._location = _location;\r\n        this.notificationService = notificationService;\r\n        this._Snackbar = _Snackbar;\r\n        this.listProduct = [];\r\n        this.isEditeMode = false;\r\n        this.baseProductPath = \"../../assets/igesa-software/images/Enterprise-\" + localStorage.getItem('idEntreprise') + \"/product/\";\r\n        //CKeditor\r\n        this.config = {\r\n            height: 200,\r\n            image: {\r\n                styles: [\r\n                    'alignLeft', 'alignCenter', 'alignRight'\r\n                ],\r\n                // Configure the available image resize options.\r\n                resizeOptions: [\r\n                    {\r\n                        name: 'resizeImage:original',\r\n                        label: 'Original',\r\n                        value: null\r\n                    },\r\n                    {\r\n                        name: 'resizeImage:5',\r\n                        label: '5%',\r\n                        value: '5'\r\n                    },\r\n                    {\r\n                        name: 'resizeImage:10',\r\n                        label: '10%',\r\n                        value: '10'\r\n                    },\r\n                    {\r\n                        name: 'resizeImage:25',\r\n                        label: '25%',\r\n                        value: '25'\r\n                    },\r\n                    {\r\n                        name: 'resizeImage:50',\r\n                        label: '50%',\r\n                        value: '50'\r\n                    },\r\n                    {\r\n                        name: 'resizeImage:75',\r\n                        label: '75%',\r\n                        value: '75'\r\n                    }\r\n                ],\r\n                // You need to configure the image toolbar, too, so it shows the new style\r\n                // buttons as well as the resize buttons.\r\n                toolbar: [\r\n                    'imageStyle:alignLeft', 'imageStyle:alignCenter', 'imageStyle:alignRight',\r\n                    '|',\r\n                    'ImageResize',\r\n                    '|',\r\n                    'imageTextAlternative'\r\n                ]\r\n            },\r\n            language: 'en'\r\n        };\r\n    }\r\n    ngOnInit() {\r\n        this.getTagsByEntreprise();\r\n        this.getCategorieByEntreprise();\r\n        this.getProductsByEntreprise();\r\n        this.productService.populateForm(this.idProduct);\r\n    }\r\n    getTagsByEntreprise() {\r\n        this.productService.getTagsByEntreprise().subscribe((res) => {\r\n            console.log(\"tags===>\", res);\r\n            this.tagsByEntreprise = res;\r\n        });\r\n    }\r\n    getCategorieByEntreprise() {\r\n        this.productService.getCategorieByEntreprise().subscribe((res) => {\r\n            console.log(\"categorie===>\", res);\r\n            this.categoryByEntreprise = res;\r\n        });\r\n    }\r\n    //events \r\n    onChangeCategorie(event) {\r\n        this.categorieSelected = event.target.value;\r\n        console.log('the categorie selected =>', this.categorieSelected);\r\n    }\r\n    onChangeTag(event) {\r\n        console.log('the selected tags ====>', event);\r\n        this.tagSelected = event;\r\n    }\r\n    onSelectFile(file) {\r\n        //test=\"../../assets/igesa-software/images/Enterprise-2/product/0.6628314392580117.png\"  \r\n        //console.log('file =======================>',file.target.files[0]);\r\n        this.imageFile = file.target.files[0];\r\n        this.typeImage = file.target.files[0].name.split('.').pop();\r\n        console.log('file.target.files[0] :', file.target.files[0], \"file.target.files[0].type :\", file.target.files[0].name.split('.').pop());\r\n    }\r\n    onAddProduct() {\r\n        this.addProduct();\r\n    }\r\n    //fo add an produit resize\r\n    async addProduct() {\r\n        let imageName = Math.random().toString(); //+ \".png\";\r\n        let productBody = {\r\n            image: this.baseProductPath + imageName + \".\" + this.typeImage,\r\n            title: this.productService.form.value.title,\r\n            description: this.productService.form.value.description,\r\n            caracteristique: this.productService.form.value.caracteristique,\r\n            slug: this.productService.form.value.slug,\r\n            name: this.productService.form.value.name,\r\n            requirements: this.productService.form.value.requirements,\r\n            categorieId: this.categorieSelected,\r\n            createdDate: new Date(),\r\n            lastModifiedDate: new Date(),\r\n            entrepriseId: localStorage.getItem('idEntreprise'),\r\n        };\r\n        await this.productService.uploadProductImage(imageName, this.imageFile).subscribe((res) => {\r\n            console.log('the result of upload image ', res);\r\n        });\r\n        await this.productService.addProduct(productBody).subscribe((res) => {\r\n            console.log('the result of add product ===>', res);\r\n            this.idProduct = res.id;\r\n            console.log('idProduct======================>', this.idProduct);\r\n            for (let i = 0; i < this.tagSelected.length; i++) {\r\n                this.productService.assignTagsToAnProduct(this.idProduct, this.tagSelected[i]).subscribe((res) => {\r\n                    console.log('the result of assign product ===>', res);\r\n                }, (err) => { console.log('assign errr===============>', err); });\r\n            }\r\n        });\r\n    }\r\n    getProductsByEntreprise() {\r\n        this.productService.getAllProductsByEntreprise().subscribe((res) => {\r\n            console.log('result of the product ====================>', res);\r\n            this.listPrducts = res;\r\n            /*console.log('==================>res image',this.listPrducts[0].image);*/ \r\n        }, (err) => { console.log('result of the product ====================>', err); });\r\n    }\r\n    /*************************\r\n     * delete product\r\n     */\r\n    onDeleteProduct(id) {\r\n        Swal.fire({\r\n            title: 'Are you sure to delete this product !?',\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonText: 'Yes',\r\n            cancelButtonText: 'No',\r\n            cancelButtonColor: 'gray'\r\n        }).then((result) => {\r\n            if (result.value) {\r\n                this.productService.deleterPoducts(id)\r\n                    .subscribe(response => {\r\n                    console.log(response);\r\n                    Swal.fire('Deleted!', 'All Groupe  was Deleted successfully.', 'success');\r\n                    if (result.dismiss === Swal.DismissReason.cancel) {\r\n                    }\r\n                    this.refresh();\r\n                    this.getProductsByEntreprise();\r\n                    this.listProduct.push();\r\n                });\r\n                // snackBar success \r\n                this._Snackbar.open(\"Groupes Deleted Successfully\", +'' + \"OK\" + '' + '⚡', {\r\n                    duration: 5000,\r\n                    horizontalPosition: \"right\",\r\n                    verticalPosition: \"top\",\r\n                    panelClass: [\"mat-toolbar\", \"mat-success\"],\r\n                });\r\n            }\r\n            this.refresh();\r\n            this.getProductsByEntreprise();\r\n            this.listProduct.push();\r\n        });\r\n    }\r\n    //refrech \r\n    refresh() {\r\n        this.router.navigateByUrl(\"/refresh\", { skipLocationChange: true }).then(() => {\r\n            console.log(decodeURI(this._location.path()));\r\n            this.router.navigate([decodeURI(this._location.path())]);\r\n        });\r\n    }\r\n    onEdite(row) {\r\n        this.isEditeMode = true;\r\n        this.productService.populateForm(row);\r\n    }\r\n    onUpdate() {\r\n        this.isEditeMode != this.isEditeMode;\r\n        this.productService.update(this.productService.form.value).subscribe((res) => {\r\n            console.log(\"====================> updateeeeee test \", res);\r\n            this.notificationService.success('  ::  ' + ' ' + ' updated successfully ' + '⚡');\r\n            this.refresh();\r\n        });\r\n    }\r\n};\r\nProductsComponent = __decorate([\r\n    Component({\r\n        selector: 'app-products',\r\n        templateUrl: './products.component.html',\r\n        styleUrls: ['./products.component.css']\r\n    })\r\n], ProductsComponent);\r\nexport { ProductsComponent };\r\n"]},"metadata":{},"sourceType":"module"}